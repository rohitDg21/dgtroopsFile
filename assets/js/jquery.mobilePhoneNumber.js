// jquery.mobilePhoneNumber
// Generated by CoffeeScript 1.7.1
(function(){var y,o=[].slice,a=jQuery,u="selectionEnd"in document.createElement("input"),c=function(t){return setTimeout(t,50)},s=function(t,r){var o,n,u,a,c,f;for(c in null==r&&(r=null),t=0!==t.indexOf("+")&&r?r+t.replace(/[^0-9]/g,""):"+"+t.replace(/[^0-9]/g,""),o=null,a=0,y)if(n=y[c],t.length>=c.length&&t.substring(0,c.length)===c&&c.length>a){for(u in o={},n)f=n[u],o[u]=f;a=(o.prefix=c).length}return o},g=function(t,r){return t===r||(t.length<r.length?r.substring(0,t.length)===t:t.substring(0,r.length)===r)},n=function(t,r,o){var n,u,a,c,f,y,m,e,i,l,h;if(null==o&&(o=null),0!==t.length&&("+"===t.substring(0,1)||o)&&(n=s(t,o))&&n.format){if(f=n.format,y=n.prefix,o&&(o===y||g(y,o))&&(0!==t.indexOf("+")||0===t.length)&&(f=f.substring(Math.min(y.length,o.length)+1),null!=n.nationalPrefix)){for(m="",e=0,h=n.nationalPrefix.length;0<=h?e<h:h<e;0<=h?++e:--e)m+=".";f=m+f}for(c="+"===t.substring(0,1)?t.substring(1):t,f.match(/\./g).length,a="",i=0,l=f.length;i<l;i++)if("."===(u=f[i])){if(0===c.length)break;a+=c.substring(0,1),c=c.substring(1)}else(r||0<c.length)&&(a+=u);t=a+c}return t},f=function(t){return!!t.metaKey||32!==t.which&&(0===t.which||(t.which<33||m(t)))},m=function(t){t=String.fromCharCode(t.which);return!!/[\d\s+]/.test(t)},e=function(t){var r,o,n;return f(t)?m(t)?(o=this.val(),r=u?this.get(0).selectionEnd:this.caret(),o=o.substring(0,this.caret())+String.fromCharCode(t.which)+o.substring(r,o.length),h.call(this,o,t),c((n=this,function(){return n.caret(n.val().length)}))):void 0:t.preventDefault()},i=function(t){var r;if(d.call(this),r=this.val(),8!==t.keyCode||this.caret()!==r.length)return h.call(this,r,t)},l=function(t){var r;if(t&&!t.meta&&(r=this.val(),0!==r.length&&this.caret()===r.length&&8===t.keyCode))return r=r.substring(0,r.length-1),t.preventDefault(),r=P.call(this,r,!1),this.val()!==r?this.val(r):void 0},h=function(t,r){var o,n,u=P.call(this,t,!0);if(u!==this.val()&&(t=(o=this.caret())===this.val().length,r.preventDefault(),this.val(u),!t))return c((n=this,function(){return n.caret(o)}))},P=function(t,r){return t=0!==t.indexOf("+")&&this.data("defaultPrefix")?t.replace(/[^0-9]/g,""):"+"+t.replace(/[^0-9]/g,""),n(t,r,this.data("defaultPrefix"))},d=function(){var t=this.val(),r=s(t,this.data("defaultPrefix")),t=null;if(r&&(t=r.country),this.data("mobilePhoneCountry")!==t)return this.data("mobilePhoneCountry",t),this.trigger("country.mobilePhoneNumber",t)},v={init:function(t){var r,o,n,u;return null==t&&(t={}),this.data("mobilePhoneNumberInited")||(this.data("mobilePhoneNumberInited",!0),this.bind("keypress",(u=this,function(){return e.apply(a(u),arguments)})),this.bind("keyup",(n=this,function(){return i.apply(a(n),arguments)})),this.bind("keydown",(o=this,function(){return l.apply(a(o),arguments)}))),this.data("defaultPrefix",null!=(r=t.allowPhoneWithoutPrefix)?r:t.defaultPrefix),""!==this.val()&&this.val(P.call(this,this.val(),!1)),this},val:function(){var t=this.val().replace(/[^0-9]/g,"");s(t,this.data("defaultPrefix"));return 0===this.val().indexOf("+")||null==this.data("defaultPrefix")?"+"+t:this.data("defaultPrefix")+t},validate:function(){var t=this.mobilePhoneNumber("val"),r=s(t,this.data("defaultPrefix"));return!r||t.length>r.prefix.length},country:function(){var t=s(this.mobilePhoneNumber("val"));if(t)return t.country},prefix:function(){var t=this.mobilePhoneNumber("country");return null==t?"":a.mobilePhoneNumberPrefixFromCountryCode(t)}};a.fn.mobilePhoneNumber=function(){var t=arguments[0],r=2<=arguments.length?o.call(arguments,1):[];return null!=t&&"string"==typeof t||(null!=t&&(r=[t]),t="init"),v[t].apply(this,r)},a.formatMobilePhoneNumber=function(t){return t="+"+t.replace(/[^0-9\*]/g,""),n(t,!0)},a.mobilePhoneNumberPrefixFromCountryCode=function(t){for(var r in y)if(y[r].country.toLowerCase()===t.toLowerCase())return 5===r.length&&"1"===r[1]?"+1":r;return null},function(t){for(var r,o,n,u=[403,587,780,250,604,778,204,506,709,902,226,249,289,343,416,519,613,647,705,807,905,418,438,450,514,579,581,819,873,306,867],a=0,c=u.length;a<c;a++)t["+1"+(o=u[a])]={country:"CA"};for(o in n=[],t)r=t[o],"+1"===o.substring(0,2)?n.push(r.format="+. (...) ...-...."):n.push(void 0)}(y={"+247":{country:"AC"},"+376":{country:"AD",format:"+... ... ..."},"+971":{country:"AE",format:"+... .. ... ...."},"+93":{country:"AF",format:"+.. .. ... ...."},"+1268":{country:"AG"},"+1264":{country:"AI"},"+355":{country:"AL",format:"+... .. ... ...."},"+374":{country:"AM",format:"+... .. ......"},"+244":{country:"AO",format:"+... ... ... ..."},"+54":{country:"AR",format:"+.. .. ..-....-...."},"+1684":{country:"AS"},"+43":{country:"AT",format:"+.. ... ......"},"+61":{country:"AU",format:"+.. ... ... ..."},"+297":{country:"AW",format:"+... ... ...."},"+994":{country:"AZ",format:"+... .. ... .. .."},"+387":{country:"BA",format:"+... .. ...-..."},"+1246":{country:"BB"},"+880":{country:"BD",format:"+... ....-......"},"+32":{country:"BE",format:"+.. ... .. .. .."},"+226":{country:"BF",format:"+... .. .. .. .."},"+359":{country:"BG",format:"+... ... ... .."},"+973":{country:"BH",format:"+... .... ...."},"+257":{country:"BI",format:"+... .. .. .. .."},"+229":{country:"BJ",format:"+... .. .. .. .."},"+1441":{country:"BM"},"+673":{country:"BN",format:"+... ... ...."},"+591":{country:"BO",format:"+... ........"},"+55":{country:"BR",format:"+.. .. .....-...."},"+1242":{country:"BS"},"+975":{country:"BT",format:"+... .. .. .. .."},"+267":{country:"BW",format:"+... .. ... ..."},"+375":{country:"BY",format:"+... .. ...-..-.."},"+501":{country:"BZ",format:"+... ...-...."},"+243":{country:"CD",format:"+... ... ... ..."},"+236":{country:"CF",format:"+... .. .. .. .."},"+242":{country:"CG",format:"+... .. ... ...."},"+41":{country:"CH",format:"+.. .. ... .. .."},"+225":{country:"CI",format:"+... .. .. .. .."},"+682":{country:"CK",format:"+... .. ..."},"+56":{country:"CL",format:"+.. . .... ...."},"+237":{country:"CM",format:"+... .. .. .. .."},"+86":{country:"CN",format:"+.. ... .... ...."},"+57":{country:"CO",format:"+.. ... ......."},"+506":{country:"CR",format:"+... .... ...."},"+53":{country:"CU",format:"+.. . ......."},"+238":{country:"CV",format:"+... ... .. .."},"+599":{country:"CW",format:"+... . ... ...."},"+537":{country:"CY"},"+357":{country:"CY",format:"+... .. ......"},"+420":{country:"CZ",format:"+... ... ... ..."},"+49":{country:"DE",format:"+.. .... ......."},"+253":{country:"DJ",format:"+... .. .. .. .."},"+45":{country:"DK",format:"+.. .. .. .. .."},"+1767":{country:"DM"},"+1849":{country:"DO"},"+213":{country:"DZ",format:"+... ... .. .. .."},"+593":{country:"EC",format:"+... .. ... ...."},"+372":{country:"EE",format:"+... .... ...."},"+20":{country:"EG",format:"+.. ... ... ...."},"+291":{country:"ER",format:"+... . ... ..."},"+34":{country:"ES",format:"+.. ... .. .. .."},"+251":{country:"ET",format:"+... .. ... ...."},"+358":{country:"FI",format:"+... .. ... .. .."},"+679":{country:"FJ",format:"+... ... ...."},"+500":{country:"FK"},"+691":{country:"FM",format:"+... ... ...."},"+298":{country:"FO",format:"+... ......"},"+33":{country:"FR",format:"+.. . .. .. .. .."},"+241":{country:"GA",format:"+... .. .. .. .."},"+44":{country:"GB",format:"+.. .... ......"},"+1473":{country:"GD"},"+995":{country:"GE",format:"+... ... .. .. .."},"+594":{country:"GF",format:"+... ... .. .. .."},"+233":{country:"GH",format:"+... .. ... ...."},"+350":{country:"GI",format:"+... ... ....."},"+299":{country:"GL",format:"+... .. .. .."},"+220":{country:"GM",format:"+... ... ...."},"+224":{country:"GN",format:"+... ... .. .. .."},"+240":{country:"GQ",format:"+... ... ... ..."},"+30":{country:"GR",format:"+.. ... ... ...."},"+502":{country:"GT",format:"+... .... ...."},"+1671":{country:"GU"},"+245":{country:"GW",format:"+... ... ...."},"+592":{country:"GY",format:"+... ... ...."},"+852":{country:"HK",format:"+... .... ...."},"+504":{country:"HN",format:"+... ....-...."},"+385":{country:"HR",format:"+... .. ... ...."},"+509":{country:"HT",format:"+... .. .. ...."},"+36":{country:"HU",format:"+.. .. ... ...."},"+62":{country:"ID",format:"+.. ...-...-..."},"+353":{country:"IE",format:"+... .. ... ...."},"+972":{country:"IL",format:"+... ..-...-...."},"+91":{country:"IN",format:"+.. .. .. ......"},"+246":{country:"IO",format:"+... ... ...."},"+964":{country:"IQ",format:"+... ... ... ...."},"+98":{country:"IR",format:"+.. ... ... ...."},"+354":{country:"IS",format:"+... ... ...."},"+39":{country:"IT",format:"+.. .. .... ...."},"+1876":{country:"JM"},"+962":{country:"JO",format:"+... . .... ...."},"+81":{country:"JP",format:"+.. ..-....-....",nationalPrefix:"0"},"+254":{country:"KE",format:"+... .. ......."},"+996":{country:"KG",format:"+... ... ... ..."},"+855":{country:"KH",format:"+... .. ... ..."},"+686":{country:"KI"},"+269":{country:"KM",format:"+... ... .. .."},"+1869":{country:"KN"},"+850":{country:"KP",format:"+... ... ... ...."},"+82":{country:"KR",format:"+.. ..-....-...."},"+965":{country:"KW",format:"+... ... ....."},"+345":{country:"KY"},"+77":{country:"KZ"},"+856":{country:"LA",format:"+... .. .. ... ..."},"+961":{country:"LB",format:"+... .. ... ..."},"+1758":{country:"LC"},"+423":{country:"LI",format:"+... ... ... ..."},"+94":{country:"LK",format:"+.. .. . ......"},"+231":{country:"LR",format:"+... ... ... ..."},"+266":{country:"LS",format:"+... .... ...."},"+370":{country:"LT",format:"+... ... ....."},"+352":{country:"LU",format:"+... .. .. .. ..."},"+371":{country:"LV",format:"+... .. ... ..."},"+218":{country:"LY",format:"+... ..-......."},"+212":{country:"MA",format:"+... ...-......"},"+377":{country:"MC",format:"+... . .. .. .. .."},"+373":{country:"MD",format:"+... ... .. ..."},"+382":{country:"ME",format:"+... .. ... ..."},"+590":{country:"MF"},"+261":{country:"MG",format:"+... .. .. ... .."},"+692":{country:"MH",format:"+... ...-...."},"+389":{country:"MK",format:"+... .. ... ..."},"+223":{country:"ML",format:"+... .. .. .. .."},"+95":{country:"MM",format:"+.. . ... ...."},"+976":{country:"MN",format:"+... .... ...."},"+853":{country:"MO",format:"+... .... ...."},"+1670":{country:"MP"},"+596":{country:"MQ",format:"+... ... .. .. .."},"+222":{country:"MR",format:"+... .. .. .. .."},"+1664":{country:"MS"},"+356":{country:"MT",format:"+... .... ...."},"+230":{country:"MU",format:"+... .... ...."},"+960":{country:"MV",format:"+... ...-...."},"+265":{country:"MW",format:"+... ... .. .. .."},"+52":{country:"MX",format:"+.. ... ... ... ...."},"+60":{country:"MY",format:"+.. ..-... ...."},"+258":{country:"MZ",format:"+... .. ... ...."},"+264":{country:"NA",format:"+... .. ... ...."},"+687":{country:"NC",format:"+... ........"},"+227":{country:"NE",format:"+... .. .. .. .."},"+672":{country:"NF",format:"+... .. ...."},"+234":{country:"NG",format:"+... ... ... ...."},"+505":{country:"NI",format:"+... .... ...."},"+31":{country:"NL",format:"+.. . ........"},"+47":{country:"NO",format:"+.. ... .. ..."},"+977":{country:"NP",format:"+... ...-......."},"+674":{country:"NR",format:"+... ... ...."},"+683":{country:"NU"},"+64":{country:"NZ",format:"+.. .. ... ...."},"+968":{country:"OM",format:"+... .... ...."},"+507":{country:"PA",format:"+... ....-...."},"+51":{country:"PE",format:"+.. ... ... ..."},"+689":{country:"PF",format:"+... .. .. .."},"+675":{country:"PG",format:"+... ... ...."},"+63":{country:"PH",format:"+.. .... ......"},"+92":{country:"PK",format:"+.. ... ......."},"+48":{country:"PL",format:"+.. .. ... .. .."},"+508":{country:"PM",format:"+... .. .. .."},"+872":{country:"PN"},"+1939":{country:"PR"},"+970":{country:"PS",format:"+... ... ... ..."},"+351":{country:"PT",format:"+... ... ... ..."},"+680":{country:"PW",format:"+... ... ...."},"+595":{country:"PY",format:"+... .. ......."},"+974":{country:"QA",format:"+... .... ...."},"+262":{country:"RE"},"+40":{country:"RO",format:"+.. .. ... ...."},"+381":{country:"RS",format:"+... .. ......."},"+7":{country:"RU",format:"+. ... ...-..-.."},"+250":{country:"RW",format:"+... ... ... ..."},"+966":{country:"SA",format:"+... .. ... ...."},"+677":{country:"SB",format:"+... ... ...."},"+248":{country:"SC",format:"+... . ... ..."},"+249":{country:"SD",format:"+... .. ... ...."},"+46":{country:"SE",format:"+.. ..-... .. .."},"+65":{country:"SG",format:"+.. .... ...."},"+290":{country:"SH"},"+386":{country:"SI",format:"+... .. ... ..."},"+421":{country:"SK",format:"+... ... ... ..."},"+232":{country:"SL",format:"+... .. ......"},"+378":{country:"SM",format:"+... .. .. .. .."},"+221":{country:"SN",format:"+... .. ... .. .."},"+252":{country:"SO",format:"+... .. ......."},"+597":{country:"SR",format:"+... ...-...."},"+211":{country:"SS",format:"+... ... ... ..."},"+239":{country:"ST",format:"+... ... ...."},"+503":{country:"SV",format:"+... .... ...."},"+963":{country:"SY",format:"+... ... ... ..."},"+268":{country:"SZ",format:"+... .... ...."},"+1649":{country:"TC"},"+235":{country:"TD",format:"+... .. .. .. .."},"+228":{country:"TG",format:"+... .. .. .. .."},"+66":{country:"TH",format:"+.. .. ... ...."},"+992":{country:"TJ",format:"+... ... .. ...."},"+690":{country:"TK"},"+670":{country:"TL",format:"+... .... ...."},"+993":{country:"TM",format:"+... .. ..-..-.."},"+216":{country:"TN",format:"+... .. ... ..."},"+676":{country:"TO",format:"+... ... ...."},"+90":{country:"TR",format:"+.. ... ... ...."},"+1868":{country:"TT"},"+688":{country:"TV"},"+886":{country:"TW",format:"+... ... ... ..."},"+255":{country:"TZ",format:"+... ... ... ..."},"+380":{country:"UA",format:"+... .. ... ...."},"+256":{country:"UG",format:"+... ... ......"},"+1":{country:"US"},"+598":{country:"UY",format:"+... .... ...."},"+998":{country:"UZ",format:"+... .. ... .. .."},"+379":{country:"VA"},"+1784":{country:"VC"},"+58":{country:"VE",format:"+.. ...-......."},"+1284":{country:"VG"},"+1340":{country:"VI"},"+84":{country:"VN",format:"+.. .. ... .. .."},"+678":{country:"VU",format:"+... ... ...."},"+681":{country:"WF",format:"+... .. .. .."},"+685":{country:"WS"},"+967":{country:"YE",format:"+... ... ... ..."},"+27":{country:"ZA",format:"+.. .. ... ...."},"+260":{country:"ZM",format:"+... .. ......."},"+263":{country:"ZW",format:"+... .. ... ...."}})}).call(this);